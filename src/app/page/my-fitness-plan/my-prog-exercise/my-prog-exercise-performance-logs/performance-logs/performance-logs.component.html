<app-tab-header [tabId]="tabId"
                [tabOptions]="tabOptions"
                type="pill"
/>
<div [id]="tabId" class="tab-content border border-top-0 rounded-bottom border-1">
  <app-collapse-block #collapseBlock
                      [actionType]="action"
                      [collapseId]="formCollapseId"
                      [contentTemplate]="performanceCollapseTemplate"
  />
  <ng-template #performanceCollapseTemplate let-btnClose="btnClose"
               let-submitEventActionType$="submitEventActionType$">
    <h5 *ngIf="performanceLogDate" class="fw-bold"> {{ "Performance from " + performanceLogDate }} </h5>
    <app-performance-log-entity-form *ngIf="action === ActionType.update"
                                     [btnCloseRef]="btnClose"
                                     [performanceLogInput]="performanceLog"
                                     [submitEventActionType$]="submitEventActionType$"
                                     [targetSetInput]="targetSet"/>
    <app-performance-log-delete-form *ngIf="action === ActionType.delete"
                                     [btnCloseRef]="btnClose"
                                     [performanceLogInput]="performanceLog"
                                     [submitEventActionType$]="submitEventActionType$"/>

  </ng-template>
  <div [id]="tabOptions[0].id" class="tab-pane fade show active p-2">

    <div [id]="accordionParentId" class="accordion">
      <div *ngFor="let performanceLogsSet of performanceLogsSortedBySet, index as i" class="accordion-item">
        <app-collapse-group-item [accordionParentId]="accordionParentId"
                                 [itemId]="performanceLogsSet.key"
                                 [title]='"Set NÂ°" +performanceLogsSet.key'
        >
          <app-performance-logs-card (actionPerformanceLog)="setPerformanceLog($event)"
                                     *ngFor="let perfLog of performanceLogsSet.value"
                                     [collapseBlockComponent]="collapseBlock"
                                     [formCollapseId]="formCollapseId"
                                     [performanceLog]="perfLog"/>
        </app-collapse-group-item>
      </div>
    </div>

    <!--    <div [id]="accordionParentId" class="accordion">-->
    <!--      <div *ngFor="let perfLogsOfDate of performanceLogsSortByDate, index as i" class="accordion-item">-->
    <!--        <app-collapse-group-item [accordionParentId]="accordionParentId"-->
    <!--                                 [isOpen]="i === 0"-->
    <!--                                 [itemId]="perfLogsOfDate.key"-->
    <!--                                 [title]="perfLogsOfDate.key | date"-->
    <!--        >-->
    <!--          <app-performance-logs-card (actionPerformanceLog)="setPerformanceLog($event)"-->
    <!--                                     *ngFor="let perfLog of perfLogsOfDate.value"-->
    <!--                                     [collapseBlockComponent]="collapseBlock"-->
    <!--                                     [formCollapseId]="formCollapseId"-->
    <!--                                     [performanceLog]="perfLog"/>-->
    <!--        </app-collapse-group-item>-->
    <!--      </div>-->
    <!--    </div>-->


    <!--    <div [id]="accordionParentId" class="accordion">-->
    <!--      <div *ngFor="let perfLogsOfDate of performanceLogsSortByDate, index as i" class="accordion-item">-->
    <!--        <app-collapse-group-item [accordionParentId]="accordionParentId"-->
    <!--                                 [isOpen]="i === 0"-->
    <!--                                 [itemId]="perfLogsOfDate.key"-->
    <!--                                 [title]="perfLogsOfDate.key | date"-->
    <!--        >-->
    <!--          <app-performance-logs-card (actionPerformanceLog)="setPerformanceLog($event)"-->
    <!--                                     *ngFor="let perfLog of perfLogsOfDate.value"-->
    <!--                                     [collapseBlockComponent]="collapseBlock"-->
    <!--                                     [formCollapseId]="formCollapseId"-->
    <!--                                     [performanceLog]="perfLog"/>-->
    <!--        </app-collapse-group-item>-->
    <!--      </div>-->
    <!--    </div>-->
    <div *ngIf="Object.keys(performanceLogsSortByDate).length === 0">
      <div class="col-auto card m-3 shadow">
        <div class="card-body ">
          <div class="row">
            <div class="col-auto">
              No performanceLogs saved
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div [id]="tabOptions[1].id" class="tab-pane fade">
    <div *ngIf="performanceLogsSortByDate">
      <app-performance-logs-charts [performanceLogsInput]="performanceLogsSortByDate"/>
    </div>
  </div>
</div>
